{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OpenCode Athena Configuration",
  "description": "Configuration schema for OpenCode Athena - Strategic wisdom meets practical execution",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "OpenCode Athena version"
    },
    "subscriptions": {
      "type": "object",
      "description": "LLM subscription configuration",
      "properties": {
        "claude": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "tier": {
              "type": "string",
              "enum": ["none", "pro", "max5x", "max20x"]
            }
          },
          "required": ["enabled", "tier"]
        },
        "openai": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" }
          },
          "required": ["enabled"]
        },
        "google": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "authMethod": {
              "type": "string",
              "enum": ["none", "antigravity", "personal", "api"]
            }
          },
          "required": ["enabled", "authMethod"]
        },
        "githubCopilot": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean" },
            "plan": {
              "type": "string",
              "enum": ["none", "free", "pro", "pro-plus", "business", "enterprise"]
            },
            "enabledModels": {
              "type": "array",
              "items": { "type": "string" },
              "description": "Optional: specific models enabled by organization admin"
            }
          },
          "required": ["enabled", "plan"]
        }
      },
      "required": ["claude", "openai", "google", "githubCopilot"]
    },
    "models": {
      "type": "object",
      "description": "Agent model assignments",
      "properties": {
        "sisyphus": {
          "type": "string",
          "description": "Model for main orchestrator agent"
        },
        "oracle": {
          "type": "string",
          "description": "Model for debugging/reasoning agent"
        },
        "librarian": {
          "type": "string",
          "description": "Model for research/documentation agent"
        },
        "frontend": {
          "type": "string",
          "description": "Model for UI/UX agent"
        },
        "documentWriter": {
          "type": "string",
          "description": "Model for documentation generation agent"
        },
        "multimodalLooker": {
          "type": "string",
          "description": "Model for image analysis agent"
        },
        "explore": {
          "type": "string",
          "description": "Model for fast codebase exploration agent"
        },
        "settings": {
          "type": "object",
          "description": "Optional agent-specific settings for temperature and thinking level",
          "properties": {
            "sisyphus": { "$ref": "#/definitions/agentSettings" },
            "oracle": { "$ref": "#/definitions/agentSettings" },
            "librarian": { "$ref": "#/definitions/agentSettings" },
            "frontend": { "$ref": "#/definitions/agentSettings" },
            "documentWriter": { "$ref": "#/definitions/agentSettings" },
            "multimodalLooker": { "$ref": "#/definitions/agentSettings" },
            "explore": { "$ref": "#/definitions/agentSettings" },
            "overrides": {
              "type": "object",
              "description": "Per-model overrides (key: model ID, value: settings)",
              "additionalProperties": { "$ref": "#/definitions/agentSettings" }
            }
          }
        },
        "custom": {
          "type": "array",
          "description": "User-defined custom models",
          "items": { "$ref": "#/definitions/customModel" }
        }
      },
      "required": ["sisyphus", "oracle", "librarian"]
    },
    "bmad": {
      "type": "object",
      "description": "BMAD METHOD integration settings",
      "properties": {
        "defaultTrack": {
          "type": "string",
          "enum": ["quick-flow", "bmad-method", "enterprise"],
          "default": "bmad-method"
        },
        "autoStatusUpdate": {
          "type": "boolean",
          "default": true
        },
        "parallelStoryLimit": {
          "type": "number",
          "default": 3,
          "minimum": 0,
          "maximum": 10
        }
      },
      "required": ["defaultTrack", "autoStatusUpdate", "parallelStoryLimit"]
    },
    "features": {
      "type": "object",
      "description": "Feature toggles",
      "properties": {
        "bmadBridge": { "type": "boolean", "default": true },
        "autoStatus": { "type": "boolean", "default": true },
        "parallelExecution": { "type": "boolean", "default": true },
        "notifications": { "type": "boolean", "default": true },
        "contextMonitor": { "type": "boolean", "default": true },
        "commentChecker": { "type": "boolean", "default": true },
        "lspTools": { "type": "boolean", "default": true },
        "autoGitOperations": { "type": "boolean", "default": false, "description": "Allow agents to perform git/gh operations automatically (false = requires explicit user permission)" }
      }
    },
    "mcps": {
      "type": "object",
      "description": "MCP server toggles",
      "properties": {
        "context7": { "type": "boolean", "default": true },
        "exa": { "type": "boolean", "default": true },
        "grepApp": { "type": "boolean", "default": true }
      }
    }
  },
  "required": ["version", "subscriptions", "models", "bmad", "features", "mcps"],
  "definitions": {
    "agentSettings": {
      "type": "object",
      "description": "Settings for an agent (temperature and thinking level)",
      "properties": {
        "temperature": {
          "type": "number",
          "minimum": 0,
          "maximum": 1,
          "description": "Model temperature (0.0-1.0) - controls randomness/creativity"
        },
        "thinkingLevel": {
          "type": "string",
          "enum": ["off", "low", "medium", "high"],
          "description": "Reasoning depth - maps to reasoning_effort (OpenAI), token budget (Anthropic), thinking_level (Google)"
        }
      }
    },
    "customModel": {
      "type": "object",
      "description": "Custom model definition",
      "properties": {
        "id": {
          "type": "string",
          "description": "Model identifier (e.g., 'anthropic/claude-next-gen')"
        },
        "name": {
          "type": "string",
          "description": "Display name"
        },
        "provider": {
          "type": "string",
          "enum": ["anthropic", "openai", "google", "github-copilot"],
          "description": "Provider name"
        },
        "description": {
          "type": "string",
          "description": "Optional description"
        },
        "capabilities": {
          "type": "object",
          "description": "Model capabilities",
          "properties": {
            "thinking": { "type": "boolean" },
            "contextWindow": { "type": "number" },
            "supportsTemperature": { "type": "boolean" }
          }
        }
      },
      "required": ["id", "name", "provider"]
    }
  }
}
